{"id":"../node_modules/nexmo/lib/index.js","dependencies":[{"name":"/home/harpal/Konfinity/css/package.json","includedInParent":true,"mtime":1586415617677},{"name":"/home/harpal/Konfinity/css/node_modules/nexmo/package.json","includedInParent":true,"mtime":1586157323327},{"name":"/home/harpal/Konfinity/css/node_modules/nexmo/.babelrc","includedInParent":true,"mtime":499162500000},{"name":"querystring","loc":{"line":5,"column":26},"parent":"/home/harpal/Konfinity/css/node_modules/nexmo/lib/index.js","resolved":"/home/harpal/.nvm/versions/node/v12.16.1/lib/node_modules/parcel-bundler/node_modules/querystring-es3/index.js"}],"generated":{"js":"\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar querystring = require(\"querystring\");\n\nvar msgpath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sms/json\"\n};\nvar shortcodePath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sc/us/${type}/json\"\n};\nvar ttsEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts/json\"\n};\nvar ttsPromptEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts-prompt/json\"\n};\nvar callEndpoint = {\n  host: \"rest.nexmo.com\",\n  path: \"/call/json\"\n};\nvar verifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/json\"\n};\nvar checkVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/check/json\"\n};\nvar controlVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/control/json\"\n};\nvar searchVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/search/json\"\n};\nvar niEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/async/json\"\n};\nvar niBasicEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/basic/json\"\n};\nvar niStandardEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/standard/json\"\n};\nvar niAdvancedEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/json\"\n};\nvar up = {};\nvar numberPattern = new RegExp(\"^[0-9 +()-]*$\");\n\nvar _options = null;\n\n// Error message resources are maintained globally in one place for easy management\nvar ERROR_MESSAGES = {\n  sender: \"Invalid from address\",\n  to: \"Invalid to address\",\n  msg: \"Invalid Text Message\",\n  msgParams: \"Invalid shortcode message parameters\",\n  countrycode: \"Invalid Country Code\",\n  msisdn: \"Invalid MSISDN passed\",\n  body: \"Invalid Body value in Binary Message\",\n  udh: \"Invalid udh value in Binary Message\",\n  title: \"Invalid title in WAP Push message\",\n  url: \"Invalid url in WAP Push message\",\n  maxDigits: \"Invalid max digits for TTS prompt\",\n  byeText: \"Invalid bye text for TTS prompt\",\n  pinCode: \"Invalid pin code for TTS confirm\",\n  failedText: \"Invalid failed text for TTS confirm\",\n  answerUrl: \"Invalid answer URL for call\",\n  verifyValidation: \"Missing Mandatory fields (number and/or brand)\",\n  checkVerifyValidation: \"Missing Mandatory fields (request_id and/or code)\",\n  controlVerifyValidation: \"Missing Mandatory fields (request_id and/or cmd-command)\",\n  searchVerifyValidation: \"Missing Mandatory fields (request_id or request_ids)\",\n  numberInsightAdvancedValidation: \"Missing Mandatory fields (number and/or callback url)\",\n  numberInsightValidation: \"Missing Mandatory field - number\",\n  numberInsightPatternFailure: \"Number can contain digits and may include any or all of the following: white space, -,+, (, ).\",\n  optionsNotAnObject: \"Options parameter should be a dictionary. Check the docs for valid properties for options\",\n  product: \"Invalid product. Should be one of [voice, sms]\"\n};\n\nexports.initialize = function (pkey, psecret, options, hosts) {\n  if (!pkey || !psecret) {\n    throw \"key and secret cannot be empty, set valid values\";\n  }\n  up = {\n    api_key: pkey,\n    api_secret: psecret\n  };\n  _options = options;\n\n  if (_options.restHost) {\n    msgpath.host = _options.restHost;\n    shortcodePath.host = _options.restHost;\n    callEndpoint.host = _options.restHost;\n  }\n\n  if (_options.apiHost) {\n    ttsEndpoint.host = _options.apiHost;\n    ttsPromptEndpoint.host = _options.apiHost;\n    verifyEndpoint.host = _options.apiHost;\n    checkVerifyEndpoint.host = _options.apiHost;\n    controlVerifyEndpoint.host = _options.apiHost;\n    searchVerifyEndpoint.host = _options.apiHost;\n    niEndpoint.host = _options.apiHost;\n    niBasicEndpoint.host = _options.apiHost;\n    niStandardEndpoint.host = _options.apiHost;\n    niAdvancedEndpoint.host = _options.apiHost;\n  }\n};\n\nexports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {\n  if (!body) {\n    sendError(callback, new Error(ERROR_MESSAGES.body));\n  } else if (!udh) {\n    sendError(callback, new Error(ERROR_MESSAGES.udh));\n  } else {\n    sendMessage({\n      from: sender,\n      to: recipient,\n      type: \"binary\",\n      body: body,\n      udh: udh\n    }, callback);\n  }\n};\n\nexports.sendWapPushMessage = function (sender, recipient, title, url, validity, callback) {\n  if (!title) {\n    sendError(callback, new Error(ERROR_MESSAGES.title));\n  } else if (!url) {\n    sendError(callback, new Error(ERROR_MESSAGES.url));\n  } else {\n    if (typeof validity === \"function\") {\n      callback = validity;\n      validity = 86400000;\n    }\n    sendMessage({\n      from: sender,\n      to: recipient,\n      type: \"wappush\",\n      title: title,\n      validity: validity,\n      url: url\n    }, callback);\n  }\n};\n\nexports.sendTextMessage = function (sender, recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    opts[\"from\"] = sender;\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendMessage(opts, callback);\n  }\n};\n\nexports.sendMessage = function (opts, callback) {\n  sendMessage(opts, callback);\n};\nfunction sendMessage(data, callback) {\n  if (!data.from) {\n    sendError(callback, new Error(ERROR_MESSAGES.sender));\n  } else if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var path = clone(msgpath);\n    path.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\"sending message from \" + data.from + \" to \" + data.to + \" with message \" + data.text);\n    sendRequest(path, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n        sendError(callback, new Error(apiResponse.messages[0][\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nfunction sendViaShortcode(type, recipient, messageParams, opts, callback) {\n  if (!recipient) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  }\n  if (!messageParams || !Object.keys(messageParams)) {\n    sendError(callback, new Error(ERROR_MESSAGES.msgParams));\n  }\n  opts = opts || {};\n  var path = clone(shortcodePath);\n  path.path = path.path.replace(\"${type}\", type);\n  Object.keys(messageParams).forEach(function (key) {\n    opts[key] = messageParams[key];\n  });\n  opts.to = recipient;\n  path.path += \"?\" + querystring.stringify(opts);\n  _options.logger.info(\"sending message from shortcode \" + type + \" to \" + recipient + \" with parameters \" + JSON.stringify(messageParams));\n  sendRequest(path, \"POST\", function (err, apiResponse) {\n    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n      sendError(callback, new Error(apiResponse.messages[0][\"error-text\"]), apiResponse);\n    } else {\n      if (callback) callback(err, apiResponse);\n    }\n  });\n}\nexports.shortcodeAlert = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n};\nexports.shortcode2FA = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n};\nexports.shortcodeMarketing = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"marketing\", recipient, messageParams, opts, callback);\n};\n\nfunction clone(a) {\n  return JSON.parse(JSON.stringify(a));\n}\n\nfunction getEndpoint(action) {\n  return { path: action };\n}\n\nfunction sendRequest(endpoint, method, callback) {\n  endpoint.path = endpoint.path + (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") + querystring.stringify(up);\n  _options.httpClient.request(endpoint, method, callback);\n}\n\nexports.checkBalance = function (callback) {\n  var balanceEndpoint = getEndpoint(\"/account/get-balance\");\n  sendRequest(balanceEndpoint, callback);\n};\n\nexports.getNumbers = function (options, callback) {\n  var numbersEndpoint = getEndpoint(\"/account/numbers\");\n  if (typeof options === \"function\") {\n    callback = options;\n  } else if ((typeof options === \"undefined\" ? \"undefined\" : _typeof(options)) === \"object\") {\n    numbersEndpoint.path = numbersEndpoint.path + \"?\";\n    for (var key in options) {\n      numbersEndpoint.path = numbersEndpoint.path + key + \"=\" + options[key] + \"&\";\n    }\n  } else {\n    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));\n    return;\n  }\n  sendRequest(numbersEndpoint, callback);\n};\n\nexports.searchNumbers = function (countryCode, pattern, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else {\n    var searchEndpoint = getEndpoint(\"/number/search\");\n    searchEndpoint.path += \"?country=\" + countryCode;\n    if (typeof pattern === \"function\") {\n      callback = pattern;\n    } else if ((typeof pattern === \"undefined\" ? \"undefined\" : _typeof(pattern)) === \"object\") {\n      searchEndpoint.path = searchEndpoint.path + \"&\";\n      for (var arg in pattern) {\n        searchEndpoint.path = searchEndpoint.path + arg + \"=\" + pattern[arg] + \"&\";\n      }\n    } else {\n      searchEndpoint.path = searchEndpoint.path + \"&pattern=\" + pattern;\n    }\n    sendRequest(searchEndpoint, callback);\n  }\n};\n\nexports.buyNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var buyEndpoint = getEndpoint(\"/number/buy\");\n    buyEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(buyEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.updateNumber = function (countryCode, msisdn, params, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var updateEndpoint = getEndpoint(\"/number/update\");\n    updateEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    updateEndpoint.path = updateEndpoint.path + \"&\";\n    for (var arg in params) {\n      updateEndpoint.path = updateEndpoint.path + arg + \"=\" + encodeURIComponent(params[arg]) + \"&\";\n    }\n    sendRequest(updateEndpoint, \"POST\", callback);\n  }\n};\n\nexports.changePassword = function (newSecret, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?newSecret=\" + encodeURIComponent(newSecret);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeMoCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?moCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeDrCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?drCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.verifyNumber = function (inputParams, callback) {\n  if (!inputParams.number || !inputParams.brand) {\n    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));\n  } else {\n    var vEndpoint = clone(verifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.checkVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.code) {\n    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));\n  } else {\n    var vEndpoint = clone(checkVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.controlVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.cmd) {\n    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));\n  } else {\n    var vEndpoint = clone(controlVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.searchVerifyRequest = function (requestIds, callback) {\n  var requestIdParam = {};\n  if (!requestIds) {\n    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));\n  } else {\n    if (Array.isArray(requestIds)) {\n      if (requestIds.length === 1) {\n        requestIdParam.request_id = requestIds;\n      } else {\n        requestIdParam.request_ids = requestIds;\n      }\n    } else {\n      requestIdParam.request_id = requestIds;\n    }\n    var vEndpoint = clone(searchVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(requestIdParam);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.numberInsight = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nexports.numberInsightBasic = function (inputParams, callback) {\n  numberInsightCommon(niBasicEndpoint, inputParams, callback);\n};\n\nexports.numberInsightStandard = function (inputParams, callback) {\n  numberInsightCommon(niStandardEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvanced = function (inputParams, callback) {\n  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvancedAsync = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nfunction numberInsightAsync(inputParams, callback) {\n  if (!inputParams.number || !inputParams.callback) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightAdvancedValidation));\n  } else {\n    var nEndpoint = clone(niEndpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(nEndpoint, callback);\n  }\n}\n\nfunction numberInsightCommon(endpoint, inputParams, callback) {\n  if (validateNumber(inputParams, callback)) {\n    var inputObj;\n    if ((typeof inputParams === \"undefined\" ? \"undefined\" : _typeof(inputParams)) !== \"object\") {\n      inputObj = { number: inputParams };\n    } else {\n      inputObj = inputParams;\n    }\n    var nEndpoint = clone(endpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputObj);\n    sendRequest(nEndpoint, callback);\n  }\n}\nfunction validateNumber(inputParams, callback) {\n  if ((typeof inputParams === \"undefined\" ? \"undefined\" : _typeof(inputParams)) === \"object\" && !inputParams.number) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));\n    return false;\n  } else if ((typeof inputParams === \"undefined\" ? \"undefined\" : _typeof(inputParams)) === \"object\" && !numberPattern.test(inputParams.number)) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  } else if ((typeof inputParams === \"undefined\" ? \"undefined\" : _typeof(inputParams)) !== \"object\" && (!inputParams || !numberPattern.test(inputParams))) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  }\n  return true;\n}\n\nfunction sendVoiceMessage(voiceEndpoint, data, callback) {\n  if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var endpoint = clone(voiceEndpoint);\n    endpoint.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\"sending TTS message to \" + data.to + \" with message \" + data.text);\n    sendRequest(endpoint, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.status > 0) {\n        sendError(callback, new Error(apiResponse[\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nexports.sendTTSMessage = function (recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendVoiceMessage(ttsEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithCapture = function (recipient, message, maxDigits, byeText, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"bye_text\"] = byeText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithConfirm = function (recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!pinCode || pinCode.length !== maxDigits) {\n    sendError(callback, new Error(ERROR_MESSAGES.pinCode));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else if (!failedText) {\n    sendError(callback, new Error(ERROR_MESSAGES.failedText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"pin_code\"] = pinCode;\n    opts[\"bye_text\"] = byeText;\n    opts[\"failed_text\"] = failedText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.call = function (recipient, answerUrl, opts, callback) {\n  if (!answerUrl) {\n    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"answer_url\"] = answerUrl;\n    sendVoiceMessage(callEndpoint, opts, callback);\n  }\n};\n\nfunction sendError(callback, err, returnData) {\n  // Throw the error in case if there is no callback passed\n  if (callback) {\n    callback(err, returnData);\n  } else {\n    throw err;\n  }\n}\n"},"sourceMaps":{"js":{"version":3,"sources":["../src/index.js"],"names":["querystring","require","msgpath","host","path","shortcodePath","ttsEndpoint","ttsPromptEndpoint","callEndpoint","verifyEndpoint","checkVerifyEndpoint","controlVerifyEndpoint","searchVerifyEndpoint","niEndpoint","niBasicEndpoint","niStandardEndpoint","niAdvancedEndpoint","up","numberPattern","RegExp","_options","ERROR_MESSAGES","sender","to","msg","msgParams","countrycode","msisdn","body","udh","title","url","maxDigits","byeText","pinCode","failedText","answerUrl","verifyValidation","checkVerifyValidation","controlVerifyValidation","searchVerifyValidation","numberInsightAdvancedValidation","numberInsightValidation","numberInsightPatternFailure","optionsNotAnObject","product","exports","initialize","pkey","psecret","options","hosts","api_key","api_secret","restHost","apiHost","sendBinaryMessage","recipient","callback","sendError","Error","sendMessage","from","type","sendWapPushMessage","validity","sendTextMessage","message","opts","data","clone","stringify","logger","info","text","sendRequest","err","apiResponse","status","messages","sendViaShortcode","messageParams","Object","keys","replace","forEach","key","JSON","shortcodeAlert","shortcode2FA","shortcodeMarketing","a","parse","getEndpoint","action","endpoint","method","indexOf","httpClient","request","checkBalance","balanceEndpoint","getNumbers","numbersEndpoint","searchNumbers","countryCode","pattern","length","searchEndpoint","arg","buyNumber","buyEndpoint","cancelNumber","cancelEndpoint","updateNumber","params","updateEndpoint","encodeURIComponent","changePassword","newSecret","settingsEndpoint","changeMoCallbackUrl","newUrl","changeDrCallbackUrl","verifyNumber","inputParams","number","brand","vEndpoint","checkVerifyRequest","request_id","code","controlVerifyRequest","cmd","searchVerifyRequest","requestIds","requestIdParam","Array","isArray","request_ids","numberInsight","numberInsightAsync","numberInsightBasic","numberInsightCommon","numberInsightStandard","numberInsightAdvanced","numberInsightAdvancedAsync","nEndpoint","validateNumber","inputObj","test","sendVoiceMessage","voiceEndpoint","sendTTSMessage","sendTTSPromptWithCapture","isNaN","sendTTSPromptWithConfirm","call","returnData"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nvar querystring = require(\"querystring\");\n\nvar msgpath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sms/json\"\n};\nvar shortcodePath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sc/us/${type}/json\"\n};\nvar ttsEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts/json\"\n};\nvar ttsPromptEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts-prompt/json\"\n};\nvar callEndpoint = {\n  host: \"rest.nexmo.com\",\n  path: \"/call/json\"\n};\nvar verifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/json\"\n};\nvar checkVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/check/json\"\n};\nvar controlVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/control/json\"\n};\nvar searchVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/search/json\"\n};\nvar niEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/async/json\"\n};\nvar niBasicEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/basic/json\"\n};\nvar niStandardEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/standard/json\"\n};\nvar niAdvancedEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/json\"\n};\nvar up = {};\nvar numberPattern = new RegExp(\"^[0-9 +()-]*$\");\n\nvar _options = null;\n\n// Error message resources are maintained globally in one place for easy management\nvar ERROR_MESSAGES = {\n  sender: \"Invalid from address\",\n  to: \"Invalid to address\",\n  msg: \"Invalid Text Message\",\n  msgParams: \"Invalid shortcode message parameters\",\n  countrycode: \"Invalid Country Code\",\n  msisdn: \"Invalid MSISDN passed\",\n  body: \"Invalid Body value in Binary Message\",\n  udh: \"Invalid udh value in Binary Message\",\n  title: \"Invalid title in WAP Push message\",\n  url: \"Invalid url in WAP Push message\",\n  maxDigits: \"Invalid max digits for TTS prompt\",\n  byeText: \"Invalid bye text for TTS prompt\",\n  pinCode: \"Invalid pin code for TTS confirm\",\n  failedText: \"Invalid failed text for TTS confirm\",\n  answerUrl: \"Invalid answer URL for call\",\n  verifyValidation: \"Missing Mandatory fields (number and/or brand)\",\n  checkVerifyValidation: \"Missing Mandatory fields (request_id and/or code)\",\n  controlVerifyValidation:\n    \"Missing Mandatory fields (request_id and/or cmd-command)\",\n  searchVerifyValidation:\n    \"Missing Mandatory fields (request_id or request_ids)\",\n  numberInsightAdvancedValidation:\n    \"Missing Mandatory fields (number and/or callback url)\",\n  numberInsightValidation: \"Missing Mandatory field - number\",\n  numberInsightPatternFailure:\n    \"Number can contain digits and may include any or all of the following: white space, -,+, (, ).\",\n  optionsNotAnObject:\n    \"Options parameter should be a dictionary. Check the docs for valid properties for options\",\n  product: \"Invalid product. Should be one of [voice, sms]\"\n};\n\nexports.initialize = function(pkey, psecret, options, hosts) {\n  if (!pkey || !psecret) {\n    throw \"key and secret cannot be empty, set valid values\";\n  }\n  up = {\n    api_key: pkey,\n    api_secret: psecret\n  };\n  _options = options;\n\n  if (_options.restHost) {\n    msgpath.host = _options.restHost;\n    shortcodePath.host = _options.restHost;\n    callEndpoint.host = _options.restHost;\n  }\n\n  if (_options.apiHost) {\n    ttsEndpoint.host = _options.apiHost;\n    ttsPromptEndpoint.host = _options.apiHost;\n    verifyEndpoint.host = _options.apiHost;\n    checkVerifyEndpoint.host = _options.apiHost;\n    controlVerifyEndpoint.host = _options.apiHost;\n    searchVerifyEndpoint.host = _options.apiHost;\n    niEndpoint.host = _options.apiHost;\n    niBasicEndpoint.host = _options.apiHost;\n    niStandardEndpoint.host = _options.apiHost;\n    niAdvancedEndpoint.host = _options.apiHost;\n  }\n};\n\nexports.sendBinaryMessage = function(sender, recipient, body, udh, callback) {\n  if (!body) {\n    sendError(callback, new Error(ERROR_MESSAGES.body));\n  } else if (!udh) {\n    sendError(callback, new Error(ERROR_MESSAGES.udh));\n  } else {\n    sendMessage(\n      {\n        from: sender,\n        to: recipient,\n        type: \"binary\",\n        body: body,\n        udh: udh\n      },\n      callback\n    );\n  }\n};\n\nexports.sendWapPushMessage = function(\n  sender,\n  recipient,\n  title,\n  url,\n  validity,\n  callback\n) {\n  if (!title) {\n    sendError(callback, new Error(ERROR_MESSAGES.title));\n  } else if (!url) {\n    sendError(callback, new Error(ERROR_MESSAGES.url));\n  } else {\n    if (typeof validity === \"function\") {\n      callback = validity;\n      validity = 86400000;\n    }\n    sendMessage(\n      {\n        from: sender,\n        to: recipient,\n        type: \"wappush\",\n        title: title,\n        validity: validity,\n        url: url\n      },\n      callback\n    );\n  }\n};\n\nexports.sendTextMessage = function(sender, recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    opts[\"from\"] = sender;\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendMessage(opts, callback);\n  }\n};\n\nexports.sendMessage = function(opts, callback) {\n  sendMessage(opts, callback);\n};\nfunction sendMessage(data, callback) {\n  if (!data.from) {\n    sendError(callback, new Error(ERROR_MESSAGES.sender));\n  } else if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var path = clone(msgpath);\n    path.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\n      \"sending message from \" +\n        data.from +\n        \" to \" +\n        data.to +\n        \" with message \" +\n        data.text\n    );\n    sendRequest(path, \"POST\", function(err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n        sendError(\n          callback,\n          new Error(apiResponse.messages[0][\"error-text\"]),\n          apiResponse\n        );\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nfunction sendViaShortcode(type, recipient, messageParams, opts, callback) {\n  if (!recipient) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  }\n  if (!messageParams || !Object.keys(messageParams)) {\n    sendError(callback, new Error(ERROR_MESSAGES.msgParams));\n  }\n  opts = opts || {};\n  var path = clone(shortcodePath);\n  path.path = path.path.replace(\"${type}\", type);\n  Object.keys(messageParams).forEach(function(key) {\n    opts[key] = messageParams[key];\n  });\n  opts.to = recipient;\n  path.path += \"?\" + querystring.stringify(opts);\n  _options.logger.info(\n    \"sending message from shortcode \" +\n      type +\n      \" to \" +\n      recipient +\n      \" with parameters \" +\n      JSON.stringify(messageParams)\n  );\n  sendRequest(path, \"POST\", function(err, apiResponse) {\n    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n      sendError(\n        callback,\n        new Error(apiResponse.messages[0][\"error-text\"]),\n        apiResponse\n      );\n    } else {\n      if (callback) callback(err, apiResponse);\n    }\n  });\n}\nexports.shortcodeAlert = function(recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n};\nexports.shortcode2FA = function(recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n};\nexports.shortcodeMarketing = function(\n  recipient,\n  messageParams,\n  opts,\n  callback\n) {\n  sendViaShortcode(\"marketing\", recipient, messageParams, opts, callback);\n};\n\nfunction clone(a) {\n  return JSON.parse(JSON.stringify(a));\n}\n\nfunction getEndpoint(action) {\n  return { path: action };\n}\n\nfunction sendRequest(endpoint, method, callback) {\n  endpoint.path =\n    endpoint.path +\n    (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\n    querystring.stringify(up);\n  _options.httpClient.request(endpoint, method, callback);\n}\n\nexports.checkBalance = function(callback) {\n  var balanceEndpoint = getEndpoint(\"/account/get-balance\");\n  sendRequest(balanceEndpoint, callback);\n};\n\nexports.getNumbers = function(options, callback) {\n  var numbersEndpoint = getEndpoint(\"/account/numbers\");\n  if (typeof options === \"function\") {\n    callback = options;\n  } else if (typeof options === \"object\") {\n    numbersEndpoint.path = numbersEndpoint.path + \"?\";\n    for (var key in options) {\n      numbersEndpoint.path =\n        numbersEndpoint.path + key + \"=\" + options[key] + \"&\";\n    }\n  } else {\n    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));\n    return;\n  }\n  sendRequest(numbersEndpoint, callback);\n};\n\nexports.searchNumbers = function(countryCode, pattern, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else {\n    var searchEndpoint = getEndpoint(\"/number/search\");\n    searchEndpoint.path += \"?country=\" + countryCode;\n    if (typeof pattern === \"function\") {\n      callback = pattern;\n    } else if (typeof pattern === \"object\") {\n      searchEndpoint.path = searchEndpoint.path + \"&\";\n      for (var arg in pattern) {\n        searchEndpoint.path =\n          searchEndpoint.path + arg + \"=\" + pattern[arg] + \"&\";\n      }\n    } else {\n      searchEndpoint.path = searchEndpoint.path + \"&pattern=\" + pattern;\n    }\n    sendRequest(searchEndpoint, callback);\n  }\n};\n\nexports.buyNumber = function(countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var buyEndpoint = getEndpoint(\"/number/buy\");\n    buyEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(buyEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function(countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function(countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.updateNumber = function(countryCode, msisdn, params, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var updateEndpoint = getEndpoint(\"/number/update\");\n    updateEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    updateEndpoint.path = updateEndpoint.path + \"&\";\n    for (var arg in params) {\n      updateEndpoint.path =\n        updateEndpoint.path + arg + \"=\" + encodeURIComponent(params[arg]) + \"&\";\n    }\n    sendRequest(updateEndpoint, \"POST\", callback);\n  }\n};\n\nexports.changePassword = function(newSecret, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?newSecret=\" + encodeURIComponent(newSecret);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeMoCallbackUrl = function(newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?moCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeDrCallbackUrl = function(newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?drCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.verifyNumber = function(inputParams, callback) {\n  if (!inputParams.number || !inputParams.brand) {\n    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));\n  } else {\n    var vEndpoint = clone(verifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.checkVerifyRequest = function(inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.code) {\n    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));\n  } else {\n    var vEndpoint = clone(checkVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.controlVerifyRequest = function(inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.cmd) {\n    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));\n  } else {\n    var vEndpoint = clone(controlVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.searchVerifyRequest = function(requestIds, callback) {\n  var requestIdParam = {};\n  if (!requestIds) {\n    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));\n  } else {\n    if (Array.isArray(requestIds)) {\n      if (requestIds.length === 1) {\n        requestIdParam.request_id = requestIds;\n      } else {\n        requestIdParam.request_ids = requestIds;\n      }\n    } else {\n      requestIdParam.request_id = requestIds;\n    }\n    var vEndpoint = clone(searchVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(requestIdParam);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.numberInsight = function(inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nexports.numberInsightBasic = function(inputParams, callback) {\n  numberInsightCommon(niBasicEndpoint, inputParams, callback);\n};\n\nexports.numberInsightStandard = function(inputParams, callback) {\n  numberInsightCommon(niStandardEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvanced = function(inputParams, callback) {\n  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvancedAsync = function(inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nfunction numberInsightAsync(inputParams, callback) {\n  if (!inputParams.number || !inputParams.callback) {\n    sendError(\n      callback,\n      new Error(ERROR_MESSAGES.numberInsightAdvancedValidation)\n    );\n  } else {\n    var nEndpoint = clone(niEndpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(nEndpoint, callback);\n  }\n}\n\nfunction numberInsightCommon(endpoint, inputParams, callback) {\n  if (validateNumber(inputParams, callback)) {\n    var inputObj;\n    if (typeof inputParams !== \"object\") {\n      inputObj = { number: inputParams };\n    } else {\n      inputObj = inputParams;\n    }\n    var nEndpoint = clone(endpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputObj);\n    sendRequest(nEndpoint, callback);\n  }\n}\nfunction validateNumber(inputParams, callback) {\n  if (typeof inputParams === \"object\" && !inputParams.number) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));\n    return false;\n  } else if (\n    typeof inputParams === \"object\" &&\n    !numberPattern.test(inputParams.number)\n  ) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  } else if (\n    typeof inputParams !== \"object\" &&\n    (!inputParams || !numberPattern.test(inputParams))\n  ) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  }\n  return true;\n}\n\nfunction sendVoiceMessage(voiceEndpoint, data, callback) {\n  if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var endpoint = clone(voiceEndpoint);\n    endpoint.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\n      \"sending TTS message to \" + data.to + \" with message \" + data.text\n    );\n    sendRequest(endpoint, \"POST\", function(err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.status > 0) {\n        sendError(callback, new Error(apiResponse[\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nexports.sendTTSMessage = function(recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendVoiceMessage(ttsEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithCapture = function(\n  recipient,\n  message,\n  maxDigits,\n  byeText,\n  opts,\n  callback\n) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"bye_text\"] = byeText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithConfirm = function(\n  recipient,\n  message,\n  maxDigits,\n  pinCode,\n  byeText,\n  failedText,\n  opts,\n  callback\n) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!pinCode || pinCode.length !== maxDigits) {\n    sendError(callback, new Error(ERROR_MESSAGES.pinCode));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else if (!failedText) {\n    sendError(callback, new Error(ERROR_MESSAGES.failedText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"pin_code\"] = pinCode;\n    opts[\"bye_text\"] = byeText;\n    opts[\"failed_text\"] = failedText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.call = function(recipient, answerUrl, opts, callback) {\n  if (!answerUrl) {\n    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"answer_url\"] = answerUrl;\n    sendVoiceMessage(callEndpoint, opts, callback);\n  }\n};\n\nfunction sendError(callback, err, returnData) {\n  // Throw the error in case if there is no callback passed\n  if (callback) {\n    callback(err, returnData);\n  } else {\n    throw err;\n  }\n}\n"]}},"error":null,"hash":"922c933e08eb0b65f304317d103ac9d4","cacheData":{"env":{}}}