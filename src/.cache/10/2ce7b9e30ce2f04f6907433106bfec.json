{"id":"../node_modules/nexmo/lib/Media.js","dependencies":[{"name":"/home/harpal/Konfinity/css/package.json","includedInParent":true,"mtime":1586415617677},{"name":"/home/harpal/Konfinity/css/node_modules/nexmo/package.json","includedInParent":true,"mtime":1586157323327},{"name":"/home/harpal/Konfinity/css/node_modules/nexmo/.babelrc","includedInParent":true,"mtime":499162500000},{"name":"./index","loc":{"line":9,"column":21},"parent":"/home/harpal/Konfinity/css/node_modules/nexmo/lib/Media.js","resolved":"/home/harpal/Konfinity/css/node_modules/nexmo/lib/index.js"},{"name":"fs","loc":{"line":13,"column":18},"parent":"/home/harpal/Konfinity/css/node_modules/nexmo/lib/Media.js","resolved":"/home/harpal/.nvm/versions/node/v12.16.1/lib/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"querystring","loc":{"line":17,"column":27},"parent":"/home/harpal/Konfinity/css/node_modules/nexmo/lib/Media.js","resolved":"/home/harpal/.nvm/versions/node/v12.16.1/lib/node_modules/parcel-bundler/node_modules/querystring-es3/index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _index = require(\"./index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _fs = require(\"fs\");\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _querystring = require(\"querystring\");\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Media = function () {\n  _createClass(Media, null, [{\n    key: \"PATH\",\n    get: function get() {\n      return \"/v3/media\";\n    }\n  }]);\n\n  function Media(credentials, options) {\n    _classCallCheck(this, Media);\n\n    this.creds = credentials;\n    this.options = options;\n\n    // Used to facilitate testing of the call to the underlying object\n    this._nexmo = this.options.nexmoOverride || _index2.default;\n\n    this._nexmo.initialize(this.creds.apiKey, this.creds.apiSecret, this.options);\n  }\n\n  _createClass(Media, [{\n    key: \"upload\",\n    value: function upload(opts, callback) {\n      opts = opts || {};\n      if (!opts.file && !opts.url) {\n        throw new Error(\"You must provide either 'file' or 'url' to upload a file\");\n      }\n\n      if (opts.file) {\n        opts.file = _fs2.default.createReadStream(opts.file);\n      }\n      return this.options.api.postFile(Media.PATH, opts, function (err, response, body) {\n        if (err) {\n          return callback(err);\n        }\n\n        var location = \"\";\n        if (response && response.headers) {\n          location = response.headers.location;\n        }\n\n        return callback(null, location);\n      }, true);\n    }\n  }, {\n    key: \"search\",\n    value: function search(options, callback) {\n      if (typeof options == \"function\" && !callback) {\n        callback = options;\n        options = {};\n      }\n\n      options = options || {};\n\n      return this._makeRequest(\"GET\", Media.PATH, options, {}, callback);\n    }\n\n    // If If-Modified-Since header is provided and the data hasn't changed, the\n    // user will receive an empty body in the callback, NOT an error\n\n  }, {\n    key: \"download\",\n    value: function download(id, headers, callback) {\n      if (!callback && typeof headers == \"function\") {\n        callback = headers;\n        headers = {};\n      }\n\n      return this._makeRequest(\"GET\", Media.PATH + \"/\" + id, {}, headers, callback, true);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(id, callback) {\n      return this._makeRequest(\"DELETE\", Media.PATH + \"/\" + id, {}, {}, callback);\n    }\n  }, {\n    key: \"get\",\n    value: function get(id, callback) {\n      return this._makeRequest(\"GET\", Media.PATH + \"/\" + id + \"/info\", {}, {}, callback);\n    }\n  }, {\n    key: \"update\",\n    value: function update(id, opts, callback) {\n      return this._makeRequest(\"PUT\", Media.PATH + \"/\" + id + \"/info\", opts, {}, callback);\n    }\n  }, {\n    key: \"_makeRequest\",\n    value: function _makeRequest(verb, path, options, headers, callback, skipJsonParsing) {\n      headers = Object.assign({\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + this.creds.generateJwt()\n      }, headers);\n\n      var req = {};\n      if (verb.toUpperCase() === \"GET\") {\n        if (Object.keys(options).length) {\n          path = path + \"?\" + _querystring2.default.stringify(options);\n        }\n      } else {\n        req[\"body\"] = JSON.stringify(options);\n      }\n\n      req[\"path\"] = path;\n      req[\"headers\"] = headers;\n\n      return this.options.api.request(req, verb, callback, skipJsonParsing);\n    }\n  }]);\n\n  return Media;\n}();\n\nexports.default = Media;\nmodule.exports = exports[\"default\"];\n"},"sourceMaps":{"js":{"version":3,"sources":["../src/Media.js"],"names":["Media","credentials","options","creds","_nexmo","nexmoOverride","initialize","apiKey","apiSecret","opts","callback","file","url","Error","createReadStream","api","postFile","PATH","err","response","body","location","headers","_makeRequest","id","verb","path","skipJsonParsing","Object","assign","Authorization","generateJwt","req","toUpperCase","keys","length","stringify","JSON","request"],"mappings":"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","file":"Media.js","sourcesContent":["\"use strict\";\n\nimport nexmo from \"./index\";\nimport fs from \"fs\";\nimport querystring from \"querystring\";\n\nclass Media {\n  static get PATH() {\n    return \"/v3/media\";\n  }\n\n  constructor(credentials, options) {\n    this.creds = credentials;\n    this.options = options;\n\n    // Used to facilitate testing of the call to the underlying object\n    this._nexmo = this.options.nexmoOverride || nexmo;\n\n    this._nexmo.initialize(\n      this.creds.apiKey,\n      this.creds.apiSecret,\n      this.options\n    );\n  }\n\n  upload(opts, callback) {\n    opts = opts || {};\n    if (!opts.file && !opts.url) {\n      throw new Error(\n        \"You must provide either 'file' or 'url' to upload a file\"\n      );\n    }\n\n    if (opts.file) {\n      opts.file = fs.createReadStream(opts.file);\n    }\n    return this.options.api.postFile(\n      Media.PATH,\n      opts,\n      function(err, response, body) {\n        if (err) {\n          return callback(err);\n        }\n\n        let location = \"\";\n        if (response && response.headers) {\n          location = response.headers.location;\n        }\n\n        return callback(null, location);\n      },\n      true\n    );\n  }\n\n  search(options, callback) {\n    if (typeof options == \"function\" && !callback) {\n      callback = options;\n      options = {};\n    }\n\n    options = options || {};\n\n    return this._makeRequest(\"GET\", Media.PATH, options, {}, callback);\n  }\n\n  // If If-Modified-Since header is provided and the data hasn't changed, the\n  // user will receive an empty body in the callback, NOT an error\n  download(id, headers, callback) {\n    if (!callback && typeof headers == \"function\") {\n      callback = headers;\n      headers = {};\n    }\n\n    return this._makeRequest(\n      \"GET\",\n      `${Media.PATH}/${id}`,\n      {},\n      headers,\n      callback,\n      true\n    );\n  }\n\n  delete(id, callback) {\n    return this._makeRequest(\"DELETE\", `${Media.PATH}/${id}`, {}, {}, callback);\n  }\n\n  get(id, callback) {\n    return this._makeRequest(\n      \"GET\",\n      `${Media.PATH}/${id}/info`,\n      {},\n      {},\n      callback\n    );\n  }\n\n  update(id, opts, callback) {\n    return this._makeRequest(\n      \"PUT\",\n      `${Media.PATH}/${id}/info`,\n      opts,\n      {},\n      callback\n    );\n  }\n\n  _makeRequest(verb, path, options, headers, callback, skipJsonParsing) {\n    headers = Object.assign(\n      {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${this.creds.generateJwt()}`\n      },\n      headers\n    );\n\n    let req = {};\n    if (verb.toUpperCase() === \"GET\") {\n      if (Object.keys(options).length) {\n        path = path + \"?\" + querystring.stringify(options);\n      }\n    } else {\n      req[\"body\"] = JSON.stringify(options);\n    }\n\n    req[\"path\"] = path;\n    req[\"headers\"] = headers;\n\n    return this.options.api.request(req, verb, callback, skipJsonParsing);\n  }\n}\n\nexport default Media;\n"]}},"error":null,"hash":"5b8de73965cf8c48508c28a4dfeb41a3","cacheData":{"env":{}}}